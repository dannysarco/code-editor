[{"C:\\Users\\dsarco\\Development\\code-editor\\jbook\\src\\index.tsx":"1","C:\\Users\\dsarco\\Development\\code-editor\\jbook\\src\\plugins\\fetch-plugin.ts":"2","C:\\Users\\dsarco\\Development\\code-editor\\jbook\\src\\plugins\\unpkg-path-plugin.ts":"3","C:\\Users\\dsarco\\Development\\code-editor\\jbook\\src\\components\\code-editor.tsx":"4"},{"size":2312,"mtime":1691620239294,"results":"5","hashOfConfig":"6"},{"size":1863,"mtime":1691614957533,"results":"7","hashOfConfig":"6"},{"size":860,"mtime":1691613709053,"results":"8","hashOfConfig":"6"},{"size":1720,"mtime":1691709619931,"results":"9","hashOfConfig":"6"},{"filePath":"10","messages":"11","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"12","usedDeprecatedRules":"13"},"s05oh3",{"filePath":"14","messages":"15","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"13"},{"filePath":"16","messages":"17","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"13"},{"filePath":"18","messages":"19","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\dsarco\\Development\\code-editor\\jbook\\src\\index.tsx",["20","21"],"import * as esbuild from \"esbuild-wasm\";\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { unpkgPathPlugin } from \"./plugins/unpkg-path-plugin\";\r\nimport { fetchPlugin } from \"./plugins/fetch-plugin\";\r\nimport CodeEditor from \"./components/code-editor\";\r\n\r\nconst App = () => {\r\n  const ref = useRef<any>();\r\n  const iframe = useRef<any>();\r\n  const [input, setInput] = useState(\"\");\r\n  const [code, setCode] = useState(\"\");\r\n\r\n  const startService = async () => {\r\n    ref.current = await esbuild.startService({\r\n      worker: true,\r\n      wasmURL: \"https://unpkg.com/esbuild-wasm@0.8.27/esbuild.wasm\",\r\n    });\r\n  };\r\n  useEffect(() => {\r\n    startService();\r\n  }, []);\r\n\r\n  const onClick = async () => {\r\n    if (!ref.current) {\r\n      return;\r\n    }\r\n\r\n    iframe.current.srcdoc = html;\r\n\r\n    const result = await ref.current.build({\r\n      entryPoints: [\"index.js\"],\r\n      bundle: true,\r\n      write: false,\r\n      plugins: [unpkgPathPlugin(), fetchPlugin(input)],\r\n      define: {\r\n        \"process.env.NODE_ENV\": '\"production\"',\r\n        global: \"window\",\r\n      },\r\n    });\r\n\r\n    // setCode(result.outputFiles[0].text);\r\n    iframe.current.contentWindow.postMessage(result.outputFiles[0].text, \"*\");\r\n  };\r\n\r\n  const html = `\r\n    <html>\r\n      <head></head>\r\n      <body>\r\n        <div id=\"root\"></div>\r\n        <script>\r\n          window.addEventListener('message', (event) => {\r\n            try {\r\n              eval(event.data);\r\n            } catch (err) {\r\n              const root = document.querySelector('#root');\r\n              root.innerHTML = '<div style=\"color: red;\"><h4>Runtime Error</h4>' + err + '</div>';\r\n              console.error(err);\r\n            }\r\n          }, false);\r\n        </script>\r\n      </body>\r\n    </html>\r\n  `;\r\n\r\n  return (\r\n    <div>\r\n      <CodeEditor\r\n        initialValue=\"const a = 1;\"\r\n        onChange={(value) => setInput(value)}\r\n      />\r\n      <textarea\r\n        value={input}\r\n        onChange={(e) => setInput(e.target.value)}\r\n      ></textarea>\r\n      <div>\r\n        <button onClick={onClick}>Submit</button>\r\n      </div>\r\n      <pre>{code}</pre>\r\n      <iframe ref={iframe} sandbox=\"allow-scripts\" srcDoc={html} />\r\n    </div>\r\n  );\r\n};\r\n\r\nReactDOM.render(<App />, document.querySelector(\"#root\"));\r\n",["22","23"],"C:\\Users\\dsarco\\Development\\code-editor\\jbook\\src\\plugins\\fetch-plugin.ts",[],"C:\\Users\\dsarco\\Development\\code-editor\\jbook\\src\\plugins\\unpkg-path-plugin.ts",[],"C:\\Users\\dsarco\\Development\\code-editor\\jbook\\src\\components\\code-editor.tsx",[],{"ruleId":"24","severity":1,"message":"25","line":12,"column":16,"nodeType":"26","messageId":"27","endLine":12,"endColumn":23},{"ruleId":"28","severity":1,"message":"29","line":80,"column":7,"nodeType":"30","endLine":80,"endColumn":68},{"ruleId":"31","replacedBy":"32"},{"ruleId":"33","replacedBy":"34"},"@typescript-eslint/no-unused-vars","'setCode' is assigned a value but never used.","Identifier","unusedVar","jsx-a11y/iframe-has-title","<iframe> elements must have a unique title property.","JSXOpeningElement","no-native-reassign",["35"],"no-negated-in-lhs",["36"],"no-global-assign","no-unsafe-negation"]